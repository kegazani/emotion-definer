# Быстрый старт

## Шаг 1: Запуск Backend

### 1.1 Установка зависимостей

```bash
cd backend

# Активируйте виртуальное окружение (если еще не активировано)
source venv/bin/activate  # macOS/Linux
# или на Windows: venv\Scripts\activate

# Установите/обновите зависимости (включая новые ML библиотеки)
pip install -r requirements.txt
```

**Важно:** При первом запуске будут загружены ML-модели (BERT для анализа эмоций), это может занять несколько минут.

### 1.2 Запуск сервера

```bash
uvicorn main:app --reload --port 8000
```

Backend будет доступен по адресу: **http://localhost:8000**

Вы увидите что-то вроде:
```
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process
INFO:     Started server process
```

## Шаг 2: Запуск Frontend

Откройте **новый терминал** (backend должен продолжать работать):

```bash
cd frontend

# Установите зависимости (если еще не установлены)
npm install

# Запустите dev сервер
npm run dev
```

Frontend будет доступен по адресу: **http://localhost:5173**

Вы увидите что-то вроде:
```
  VITE v5.0.8  ready in 500 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

## Шаг 3: Использование

1. Откройте браузер и перейдите на **http://localhost:5173**

2. **Вкладка "Дневник":**
   - На вкладке "Запись" - пишите текстовые записи
   - На вкладке "Настроение" - быстро отмечайте эмоции
   - Все записи объединяются в общий список

3. **Вкладка "Статистика":**
   - Просматривайте статистику за день/неделю/месяц
   - Видите данные по дневнику и часам

4. **Вкладка "Состояние":**
   - Реалтайм показатели биометрии
   - Предсказание эмоций на основе биометрии
   - Обновляется каждые 10 секунд

## Проверка работы API

После запуска backend можно проверить API:

```bash
# Проверка что сервер работает
curl http://localhost:8000/

# Должен вернуть:
# {"message":"Emotion Diary API","version":"2.0","watch_api":true,"ml_api":true}
```

## Обучение ML модели

Для работы предсказания эмоций по биометрии нужно сначала обучить модель:

1. Соберите данные: отметьте минимум 50-100 эмоций через UI (вкладка "Настроение")
2. Обучите модель:

```bash
cd backend
source venv/bin/activate
python ml_pipeline.py
```

Модель сохранится в `backend/models/emotion_model.json` и будет автоматически использоваться для предсказаний.

## Решение проблем

### Backend не запускается

1. **Проверьте что порт 8000 свободен:**
   ```bash
   lsof -i :8000  # macOS/Linux
   ```

2. **Проверьте что все зависимости установлены:**
   ```bash
   cd backend
   source venv/bin/activate
   pip list | grep -E "fastapi|uvicorn|xgboost|numpy"
   ```

3. **Проверьте логи** - в терминале backend будут видны ошибки

### Frontend не подключается к backend

1. Убедитесь что backend запущен на порту 8000
2. Проверьте что в `vite.config.ts` указан правильный proxy:
   ```typescript
   proxy: {
     '/api': {
       target: 'http://localhost:8000',
       changeOrigin: true,
     },
   }
   ```

### ML модель не загружается

- При первом запуске модель скачивается автоматически (может занять время)
- Убедитесь что есть интернет-соединение
- Приложение будет работать даже без ML модели (с упрощенным анализом)

### Ошибка "Model file not found" при предсказании эмоций

Это нормально если модель еще не обучена. Сначала соберите данные и обучите модель командой `python ml_pipeline.py`.

## Остановка

Чтобы остановить серверы:

1. В терминале backend нажмите `Ctrl+C`
2. В терминале frontend нажмите `Ctrl+C`

